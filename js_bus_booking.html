<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Online Bus Reservation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap');

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins',sans-serif;
}

body{
    min-height:100vh;
    background: linear-gradient(135deg,#0f172a,#1e40af,#06b6d4);
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    color:white;
}

.container{
    width:100%;
    max-width:950px;
    padding:30px;
    border-radius:18px;
    backdrop-filter: blur(18px);
    background: rgba(255,255,255,0.12);
    border:1px solid rgba(255,255,255,0.25);
    box-shadow:0 25px 50px rgba(0,0,0,0.35);
}

h2{
    text-align:center;
    margin-bottom:25px;
    font-weight:600;
}

#availableSeats{
    background:#22c55e;
    padding:4px 12px;
    border-radius:20px;
    color:white;
    font-weight:600;
}

.form-grid{
    display:grid;
    grid-template-columns: repeat(2,1fr);
    gap:15px;
}

.full{
    grid-column: span 2;
}

input,select{
    width:100%;
    padding:12px 14px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.35);
    background:rgba(255,255,255,0.95);
    outline:none;
    font-size:14px;
    transition:.25s;
}

input:focus,select:focus{
    border-color:#2563eb;
    box-shadow:0 0 0 3px rgba(37,99,235,0.15);
}

button{
    padding:12px;
    border:none;
    border-radius:10px;
    font-weight:500;
    cursor:pointer;
    transition:.25s;
}

.book-btn{
    background:linear-gradient(135deg,#2563eb,#1d4ed8);
    color:white;
}

.cancel-btn{
    background:linear-gradient(135deg,#ef4444,#dc2626);
    color:white;
}

button:hover{
    transform:translateY(-1px);
    box-shadow:0 10px 18px rgba(0,0,0,0.25);
}

.error{
    color:#fecaca;
    font-weight:500;
    margin-bottom:10px;
}

.success{
    color:#bbf7d0;
    font-weight:500;
    margin-bottom:10px;
}

/* ===== SUMMARY ===== */
.summary{
    margin-top:25px;
    padding:18px;
    border-radius:14px;
    background:rgba(255,255,255,0.12);
    backdrop-filter: blur(12px);
}

/* ===== TABLE ===== */
table{
    width:100%;
    border-collapse:separate;
    border-spacing:0;
    margin-top:14px;
    background:#ffffff;
    color:#0f172a;
    border-radius:12px;
    overflow:hidden;
    font-size:14px;
}

th{
    background:#1e40af;
    color:white;
    padding:12px;
    text-align:center;
    font-weight:600;
    letter-spacing:.3px;
}

td{
    padding:12px;
    text-align:center;
    border-bottom:1px solid #e5e7eb;
}

tbody tr:nth-child(even){
    background:#f8fafc;
}

tbody tr:hover{
    background:#e0f2fe;
    transition:.2s;
}

thead tr th:first-child{
    border-top-left-radius:12px;
}
thead tr th:last-child{
    border-top-right-radius:12px;
}

@media(max-width:700px){
    .form-grid{
        grid-template-columns:1fr;
    }
    .full{
        grid-column: span 1;
    }
}

@media(max-width:600px){
    .summary{
        overflow-x:auto;
    }
    table{
        min-width:600px;
    }
}
</style>
</head>

<body>

<div class="container">
<h2>ðŸšŒ Online Bus Reservation</h2>

<p><b>Available Seats:</b> <span id="availableSeats">20</span></p>

<p id="msg" class="error"></p>

<div class="form-grid">

<div>
<label>Passenger Name</label>
<input type="text" id="name">
</div>

<div>
<label>Age</label>
<input type="number" id="age" min="6" max="100">
</div>

<div>
<label>Mobile Number</label>
<input type="text" id="mobile">
</div>

<div>
<label>Number of Seats (Max 5)</label>
<input type="number" id="seats" min="1" max="5">
</div>

<div>
<label>Source</label>
<select id="source">
<option value="">Select Source</option>
<option>Chennai</option>
<option>Bangalore</option>
<option>Hyderabad</option>
<option>Vadakara</option>
</select>
</div>

<div>
<label>Destination</label>
<select id="destination">
<option value="">Select Destination</option>
<option>Chennai</option>
<option>Bangalore</option>
<option>Hyderabad</option>
<option>Vadakara</option>
</select>
</div>

<div class="full">
<label>Fare (Auto Calculated)</label>
<input type="text" id="fare" readonly>
</div>

<div>
<button class="book-btn" onclick="bookTicket()">Book Ticket</button>
</div>

<div>
<button class="cancel-btn" onclick="cancelTicket()">Cancel Ticket</button>
</div>

</div>

<div id="summary" class="summary" style="display:none;">
<h3>Booking Summary</h3>
<table id="ticketTable">
<thead>
<tr>
<th>Name</th>
<th>Age</th>
<th>Mobile</th>
<th>Route</th>
<th>Seats</th>
<th>Total Fare</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

</div>

<script>
let totalSeats = 20;
let bookedSeats = 0;
let ticketBooked = false;
const pricePerSeat = 500;

document.getElementById("seats").addEventListener("input", () => {
    let seats = Number(document.getElementById("seats").value);
    if(seats > 0){
        document.getElementById("fare").value = + (seats * pricePerSeat);
    } else {
        document.getElementById("fare").value = "";
    }
});

function showMessage(text, type="error"){
    const msg = document.getElementById("msg");
    msg.className = type;
    msg.textContent = text;
}

function bookTicket(){

    const name = document.getElementById("name").value.trim();
    const age = Number(document.getElementById("age").value);
    const mobile = document.getElementById("mobile").value.trim();
    const source = document.getElementById("source").value;
    const destination = document.getElementById("destination").value;
    const seats = Number(document.getElementById("seats").value);

    if(name === "") return showMessage("Passenger name cannot be empty");
    if(age <= 5 || isNaN(age)) return showMessage("Age must be greater than 5");
    if(!/^\d{10}$/.test(mobile)) return showMessage("Mobile number must contain exactly 10 digits");
    if(seats < 1 || seats > 5) return showMessage("You can book maximum 5 seats");
    if(source === "" || destination === "") return showMessage("Please select source and destination");
    if(source === destination) return showMessage("Source and destination cannot be same");
    if(bookedSeats + seats > totalSeats) return showMessage("Seats not available");

    bookedSeats += seats;
    ticketBooked = true;

    document.getElementById("availableSeats").textContent = totalSeats - bookedSeats;

    const fare = seats * pricePerSeat;

    document.querySelector("#ticketTable tbody").innerHTML = `
        <tr>
            <td>${name}</td>
            <td>${age}</td>
            <td>${mobile}</td>
            <td>${source} â†’ ${destination}</td>
            <td>${seats}</td>
            <td>${fare}</td>
        </tr>
    `;

    document.getElementById("summary").style.display = "block";
    showMessage("Ticket booked successfully!", "success");
}

function cancelTicket(){

    if(!ticketBooked) return showMessage("No ticket to cancel");

    const seats = Number(document.getElementById("seats").value);
    bookedSeats -= seats;
    if(bookedSeats < 0) bookedSeats = 0;

    document.getElementById("availableSeats").textContent = totalSeats - bookedSeats;

    document.querySelector("#ticketTable tbody").innerHTML = "";
    document.getElementById("summary").style.display = "none";

    ticketBooked = false;
    showMessage("Ticket cancelled successfully", "success");
}
</script>

</body>
</html>